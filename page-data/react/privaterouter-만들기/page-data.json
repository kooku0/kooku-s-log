{"componentChunkName":"component---src-templates-blog-post-js","path":"/react/privaterouter-만들기/","result":{"data":{"site":{"siteMetadata":{"title":"Kooku's log","author":"Kooku","siteUrl":"https://kooku.netlify.com","comment":{"disqusShortName":"","utterances":"koomg9599/kooku-s-log"},"sponsor":{"buyMeACoffeeId":"kooku"}}},"markdownRemark":{"id":"360e9343-83ba-50cb-bf09-422bb1a95c92","excerpt":"로그인이 들어가는 웹사이트의 경우 PrivateRouter가 필요합니다. 만약 로그인이 되어 있지 않다면  페이지로 redirect 해줘야 하는데 어떻게 구현을 하면 될까요? 이전 프로젝트에서 제가 구현한 방법은 다음과 같습니다. 위와 같이 모든 페이지에 로그인이 되어 있지 않다면 홈으로 redirect하는 코드를 삽입하였습니다. 하지만 다음과 같이 코드를 바꿀 수 있을 것 같습니다. 이렇게 코드를 적으면 해당 페이지에서 작업을 처리하는데까지 가지 않고 바로 redirect…","html":"<p>로그인이 들어가는 웹사이트의 경우 PrivateRouter가 필요합니다. 만약 로그인이 되어 있지 않다면 <code class=\"language-text\">signin</code> 페이지로 redirect 해줘야 하는데 어떻게 구현을 하면 될까요?</p>\n<p>이전 프로젝트에서 제가 구현한 방법은 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// pages/mypage.jsx</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Redirect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isLogin <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>isLogin <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">&lt;</span>Redirect to<span class=\"token operator\">=</span><span class=\"token string\">'/'</span><span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span>\n    \t<span class=\"token operator\">...</span>\n        <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이 모든 페이지에 로그인이 되어 있지 않다면 홈으로 redirect하는 코드를 삽입하였습니다.</p>\n<p>하지만 다음과 같이 코드를 바꿀 수 있을 것 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// App.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BowserRouter <span class=\"token keyword\">as</span> Router<span class=\"token punctuation\">,</span> Redirect<span class=\"token punctuation\">,</span> Route<span class=\"token punctuation\">,</span> Switch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n<span class=\"token keyword\">import</span> PrivateRoute <span class=\"token keyword\">from</span> <span class=\"token string\">'./components/PrivateRouter'</span>\n<span class=\"token keyword\">import</span> SignIn <span class=\"token keyword\">from</span> <span class=\"token string\">'./pages/SignIn'</span>\n<span class=\"token keyword\">import</span> MyPage <span class=\"token keyword\">from</span> <span class=\"token string\">'./pages/MyPage'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">PAGE_PATHS</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./constants'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>Router<span class=\"token operator\">></span>\n            \t<span class=\"token operator\">&lt;</span>Switch<span class=\"token operator\">></span>\n            \t\t<span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">PAGE_PATHS</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SIGNIN</span><span class=\"token punctuation\">}</span> component<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>SignIn<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            \t\t<span class=\"token operator\">&lt;</span>PrivateRoute\n                        path<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">PAGE_PATHS</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MY_PAGE</span><span class=\"token punctuation\">}</span>\n                        redirectTo<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token constant\">PAGE_PATHS</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SIGNIN</span><span class=\"token punctuation\">}</span>\n                        component<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>MyPage<span class=\"token punctuation\">}</span>\n                      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\t            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Switch<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Router<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// components/PrivateRouter.jsx</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Redirect<span class=\"token punctuation\">,</span> Route <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> component<span class=\"token operator\">:</span> Component<span class=\"token punctuation\">,</span> redirectTo<span class=\"token punctuation\">,</span> authStore<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">,</span> exact <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isLogin <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token operator\">&lt;</span>Route\n        \tPath<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>path<span class=\"token punctuation\">}</span>\n\t\t    exact<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>exact<span class=\"token punctuation\">}</span>\n    \t\trender<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n            \t<span class=\"token function\">isLogin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n                \t<span class=\"token operator\">&lt;</span>Component <span class=\"token punctuation\">{</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    \t\t\t<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token operator\">&lt;</span>Redirect\n                    \tto<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>redirectTo<span class=\"token punctuation\">}</span>\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 코드를 적으면 해당 페이지에서 작업을 처리하는데까지 가지 않고 바로 redirect 해주고, 코드도 훨씬 깔끔해 집니다. PrivateRouter라는 곳에서 다 처리해 주므로 중복하여 코드를 작성해야하는 부분도 없어지겠지요. 그리고 Redirect가 어디에서 이루어지는지도 쉽게 확인하고 할 수 있을 겁니다.</p>","frontmatter":{"title":"PrivateRouter 만들기","date":"March 04, 2020"}}},"pageContext":{"slug":"/react/privaterouter-만들기/","previous":{"fields":{"slug":"/일상/[netflix]-나-홀로-그대/"},"frontmatter":{"title":"(Netflix) 나 홀로 그대","category":"일상"}},"next":{"fields":{"slug":"/react/hook을-한-문장으로-설명해줘/"},"frontmatter":{"title":"Hook을 한 문장으로 설명해줘","category":"react"}}}}}